<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  
  <title>Live Flowchart Recipe - General Usage - ServiceWorker Cookbook</title>
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="tabzilla.css">
  <link rel="stylesheet" href="bundle.css">
  <script type="text/javascript" src="bundle.js" defer></script>
</head>
<body>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49796218-37', 'auto');
  ga('send', 'pageview');
  </script>

  <div class="book with-nav">
    <nav><div class="recipes-cover">
      <div id="tabzilla">
        <a href="https://www.mozilla.org/">Mozilla</a>
      </div>

      <ul class="recipes">
        <li><a href="/">Introduction</a></li>
        <li><a href="https://github.com/mozilla/serviceworker-cookbook/">Contribute on GitHub</a></li>

          
            <li class="category"><a href="caching-strategies.html">Caching strategies</a></li>
            
              
              <li>
                <a href="strategy-cache-and-update.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache and update
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-cache-only.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache only
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-network-or-cache.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Network or cache
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-cache-update-and-refresh.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Cache, update and refresh
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-embedded-fallback.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Embedded fallback
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="web-push.html">Web Push</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="push-get-payload.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push and Retrieve Payload
                </a>
              </li>
              
            
              
              <li>
                <a href="push-payload.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Payload
                </a>
              </li>
              
            
              
              <li>
                <a href="push-rich.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Rich
                </a>
              </li>
              
            
              
              <li>
                <a href="push-simple.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Simple
                </a>
              </li>
              
            
              
              <li>
                <a href="push-replace.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Push Tag
                </a>
              </li>
              
            
              
              <li>
                <a href="push-clients.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Clients
                </a>
              </li>
              
            
              
              <li>
                <a href="push-quota.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Quota
                </a>
              </li>
              
            
              
              <li>
                <a href="push-subscription-management.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Subscription
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="general-usage.html">General Usage</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="immediate-claim.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Immediate Claim
                </a>
              </li>
              
            
              
              <li>
                <a href="message-relay.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Message Relay
                </a>
              </li>
              
            
              
              <li>
                <a href="fetching.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Fetching Remote Resources
                </a>
              </li>
              
            
              
              <li>
                <a href="live-flowchart.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Live Flowchart
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="offline.html">Offline</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="json-cache.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  JSON Cache
                </a>
              </li>
              
            
              
              <li>
                <a href="offline-fallback.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Offline Fallback
                </a>
              </li>
              
            
              
              <li>
                <a href="offline-status.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Offline Status
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="beyond-offline.html">Beyond Offline</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="local-download.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Local Download
                </a>
              </li>
              
            
              
              <li>
                <a href="api-analytics.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  API Analytics
                </a>
              </li>
              
            
              
              <li>
                <a href="cache-from-zip.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Cache from ZIP
                </a>
              </li>
              
            
              
              <li>
                <a href="load-balancer.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Load balancer
                </a>
              </li>
              
            
              
              <li>
                <a href="virtual-server.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Virtual Server
                </a>
              </li>
              
            
              
              <li>
                <a href="dependency-injector.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Dependency Injection
                </a>
              </li>
              
            
              
              <li>
                <a href="request-deferrer.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Request Deferrer
                </a>
              </li>
              
            
              
            
              
            
          
            <li class="category"><a href="performance.html">Performance</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="cache-then-network.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache then Network
                </a>
              </li>
              
            
              
              <li>
                <a href="render-store.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Render Store
                </a>
              </li>
              
            
          
      </ul>
    </div></nav>
    <main>
      <header>
        <div class="nav-top">
          <div class="item">
            <button id="navToggle" class="fi-list large"></button>
          </div>
          <div class="tabs">
            
              <div class="item"><a href="live-flowchart.html">Readme</a></div>
              <div class="item"><a href="live-flowchart_demo.html">Demo <button class="demo-launch" data-href="live-flowchart/index.html"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAQAAACIaFaMAAAAOklEQVR4AWMgA/yHQhBogPP+I0mgSYEJZgZG7BIQgGkUmnADEGKRaICw0Y1qQHEuNi+QJYEJ8UuQDACsJ1O3PKSOdQAAAABJRU5ErkJggg=="></button></a></div>
              <div class="item" style="flex-grow: 1;"></div>
              
                <div class="item"><a href="live-flowchart_app_doc.html">app.js</a></div>
              
                <div class="item"><a href="live-flowchart_logger_doc.html">logger.js</a></div>
              
                <div class="item"><a href="live-flowchart_service-worker-util_doc.html">service-worker-util.js</a></div>
              
                <div class="item"><a href="live-flowchart_service-worker_doc.html">service-worker.js</a></div>
              
            
          </div>
        </div>
      </header>
      <div class="main-inner">
        <div class="text-page">
  <h1 id="live-flowchart">Live Flowchart</h1>
<p>This recipe provides a way to learn how to use service workers (SW) through showing <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers" target="_blank">the flow diagram of SW workflow explained on the Mozilla Developer Network</a>, and logging on screen the steps taken by a real Web App running service workers.</p>
<h2 id="difficulty">Difficulty</h2>
<p>Advanced</p>
<h2 id="screenshots">Screenshots</h2>
<p>Register + Unregister</p>
<p><img src="https://cdn.rawgit.com/mozilla/serviceworker-cookbook/master/live-flowchart/register-unregister.png" alt="Screenshot"></p>
<p>Active service worker on page load + unregister</p>
<p><img src="https://cdn.rawgit.com/mozilla/serviceworker-cookbook/master/live-flowchart/active-service-worker-unregister.png" alt="Screenshot"></p>
<p>Wrong service worker scriptURL</p>
<p><img src="https://cdn.rawgit.com/mozilla/serviceworker-cookbook/master/live-flowchart/wrong-scriptURL.png" alt="Screenshot"></p>
<p>Security error</p>
<p><img src="https://cdn.rawgit.com/mozilla/serviceworker-cookbook/master/live-flowchart/security-error.png" alt="Screenshot"></p>
<h2 id="features-and-usage">Features and Usage</h2>
<p>Features are:</p>
<ul>
<li>Register a service worker</li>
<li>Reload document</li>
<li>Unregister the service worker</li>
</ul>
<p>The features coincide to the buttons at the top of the page, which can be pressed in a whatever order. You can also specify the SW scriptURL and scope to simulate different test cases.</p>
<p>Usage:</p>
<ul>
<li>press buttons</li>
<li>read the logs</li>
<li>take actions in case (e.g. open about://serviceworkers)</li>
<li>hack the code and see what happens</li>
</ul>
<h2 id="how-to-read-the-logs">How to Read the Logs</h2>
<p>There are two logs to read:</p>
<ul>
<li>the HTML log</li>
<li>the browser log</li>
</ul>
<p>In the HTML log colors mean different log levels:</p>
<ul>
<li>red =&gt; error</li>
<li>yellow =&gt; warn</li>
<li>green =&gt; info</li>
<li>white =&gt; log</li>
<li>gray =&gt; debug</li>
</ul>
<p>The browser log prints:</p>
<ul>
<li>the same messages printed on the HTML log, using the same log level</li>
<li>the service worker log (since service workers can’t access the DOM)</li>
</ul>
<h2 id="compatibility">Compatibility</h2>
<p>Tests have been run in:</p>
<ul>
<li>Firefox Nightly 44.0a1 (2015-10-12)</li>
<li>Chrome Canary 48.0.2533.0</li>
<li>Opera 32.0</li>
</ul>
<p>on a machine running Mac OS X 10.8.5</p>
<p>Notes:</p>
<ul>
<li>the browser has to support ES6</li>
</ul>
<h2 id="whats-next--contributions">What’s Next / Contributions</h2>
<ul>
<li>responsive to work on mobile</li>
<li>have the flowchart build in SVG and visualize the service worker states</li>
<li>add specs / automatic tests for existing features</li>
<li>add specs / automatic tests for new features in a BDD/TDD fashion</li>
<li>do something oninstall</li>
<li>do something onactivate</li>
<li>do something onfetch</li>
<li>provide a button to simulate the offline network status</li>
<li>provide a button to simulate the lie-fi network status (very low connectivity but not completely offline)</li>
</ul>
<h2 id="category">Category</h2>
<p>General Usage</p>

</div>
        <hr/>
        <h2>Has it been useful?</h2>
       <p>Tell us what you think of this recipe by leaving a comment!</p>
        <aside id="disqus_thread"></aside>
        <script>
         // https://disqus.com/admin/universalcode/#configuration-variables
         var disqus_config = function () {
          this.page.identifier = 'live-flowchart';
         };
         (function() { // DON'T EDIT BELOW THIS LINE
           var d = document, s = d.createElement('script');
           s.src = '//serviceworkers.disqus.com/embed.js';
           s.setAttribute('data-timestamp', +new Date());
           (d.head || d.body).appendChild(s);
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </main>
  </div>
</body>
</html>
