<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  
  <title>Live Flowchart Recipe - General Usage - ServiceWorker Cookbook</title>
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="tabzilla.css">
  <link rel="stylesheet" href="bundle.css">
  <script type="text/javascript" src="bundle.js" defer></script>
</head>
<body>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49796218-37', 'auto');
  ga('send', 'pageview');
  </script>

  <div class="book with-nav">
    <nav><div class="recipes-cover">
      <div id="tabzilla">
        <a href="https://www.mozilla.org/">Mozilla</a>
      </div>

      <ul class="recipes">
        <li><a href="/">Introduction</a></li>
        <li><a href="https://github.com/mozilla/serviceworker-cookbook/">Contribute on GitHub</a></li>

          
            <li class="category"><a href="caching-strategies.html">Caching strategies</a></li>
            
              
              <li>
                <a href="strategy-cache-and-update.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache and update
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-cache-only.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache only
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-network-or-cache.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Network or cache
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-cache-update-and-refresh.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Cache, update and refresh
                </a>
              </li>
              
            
              
              <li>
                <a href="strategy-embedded-fallback.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Embedded fallback
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="web-push.html">Web Push</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="push-get-payload.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push and Retrieve Payload
                </a>
              </li>
              
            
              
              <li>
                <a href="push-payload.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Payload
                </a>
              </li>
              
            
              
              <li>
                <a href="push-rich.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Rich
                </a>
              </li>
              
            
              
              <li>
                <a href="push-simple.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Push Simple
                </a>
              </li>
              
            
              
              <li>
                <a href="push-replace.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Push Tag
                </a>
              </li>
              
            
              
              <li>
                <a href="push-clients.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Clients
                </a>
              </li>
              
            
              
              <li>
                <a href="push-quota.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Quota
                </a>
              </li>
              
            
              
              <li>
                <a href="push-subscription-management.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Push Subscription
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="general-usage.html">General Usage</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="immediate-claim.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Immediate Claim
                </a>
              </li>
              
            
              
              <li>
                <a href="message-relay.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Message Relay
                </a>
              </li>
              
            
              
              <li>
                <a href="fetching.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Fetching Remote Resources
                </a>
              </li>
              
            
              
              <li>
                <a href="live-flowchart.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Live Flowchart
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="offline.html">Offline</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="json-cache.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  JSON Cache
                </a>
              </li>
              
            
              
              <li>
                <a href="offline-fallback.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Offline Fallback
                </a>
              </li>
              
            
              
              <li>
                <a href="offline-status.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Offline Status
                </a>
              </li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          
            <li class="category"><a href="beyond-offline.html">Beyond Offline</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="local-download.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Local Download
                </a>
              </li>
              
            
              
              <li>
                <a href="api-analytics.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  API Analytics
                </a>
              </li>
              
            
              
              <li>
                <a href="cache-from-zip.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Cache from ZIP
                </a>
              </li>
              
            
              
              <li>
                <a href="load-balancer.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Load balancer
                </a>
              </li>
              
            
              
              <li>
                <a href="virtual-server.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Virtual Server
                </a>
              </li>
              
            
              
              <li>
                <a href="dependency-injector.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Dependency Injection
                </a>
              </li>
              
            
              
              <li>
                <a href="request-deferrer.html">
                  <span class="ball-difficulty-3" title="Difficulty: Advanced">
                    
                    A
                    
                  </span>
                  Request Deferrer
                </a>
              </li>
              
            
              
            
              
            
          
            <li class="category"><a href="performance.html">Performance</a></li>
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
              <li>
                <a href="cache-then-network.html">
                  <span class="ball-difficulty-1" title="Difficulty: Beginner">
                    
                    B
                    
                  </span>
                  Cache then Network
                </a>
              </li>
              
            
              
              <li>
                <a href="render-store.html">
                  <span class="ball-difficulty-2" title="Difficulty: Intermediate">
                    
                    I
                    
                  </span>
                  Render Store
                </a>
              </li>
              
            
          
      </ul>
    </div></nav>
    <main>
      <header>
        <div class="nav-top">
          <div class="item">
            <button id="navToggle" class="fi-list large"></button>
          </div>
          <div class="tabs">
            
              <div class="item"><a href="live-flowchart.html">Readme</a></div>
              <div class="item"><a href="live-flowchart_demo.html">Demo <button class="demo-launch" data-href="live-flowchart/index.html"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAQAAACIaFaMAAAAOklEQVR4AWMgA/yHQhBogPP+I0mgSYEJZgZG7BIQgGkUmnADEGKRaICw0Y1qQHEuNi+QJYEJ8UuQDACsJ1O3PKSOdQAAAABJRU5ErkJggg=="></button></a></div>
              <div class="item" style="flex-grow: 1;"></div>
              
                <div class="item"><a href="live-flowchart_app_doc.html">app.js</a></div>
              
                <div class="item"><a href="live-flowchart_logger_doc.html">logger.js</a></div>
              
                <div class="item"><a href="live-flowchart_service-worker-util_doc.html">service-worker-util.js</a></div>
              
                <div class="item"><a href="live-flowchart_service-worker_doc.html">service-worker.js</a></div>
              
            
          </div>
        </div>
      </header>
      <div class="main-inner">
        <div id="container">
  <div id="background"></div>
  
  <ul class="sections">
      
        <li id="title">
            <div class="annotation">
                <h1>service-worker-util.js</h1>
            </div>
        </li>
      
      
      
      <li id="section-1">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-1">&#182;</a>
            </div>
            
          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* global Logger */</span></pre></div></div>
          
      </li>
      
      
      <li id="section-2">
          <div class="annotation">
            
            <div class="pilwrap for-h2">
              <a class="pilcrow" href="#section-2">&#182;</a>
            </div>
            <h2>SWUtil</h2>
Service Worker helper

          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">SWUtil</span>(<span class="hljs-params"></span>) {
}</pre></div></div>
          
      </li>
      
      
      <li id="section-3">
          <div class="annotation">
            
            <div class="pilwrap for-h3">
              <a class="pilcrow" href="#section-3">&#182;</a>
            </div>
            <h3>Are Service Workers Supported?</h3>
Check whether service workers are supported

          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-title class_">SWUtil</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">areServiceWorkersSupported</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">newSection</span>();
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Are Service Workers Supported?&#x27;</span>);

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;checking navigator.serviceWorker&#x27;</span>);

  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">serviceWorker</span>) {
    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Service workers supported by this browser&#x27;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;No, service workers are NOT supported by this browser&#x27;</span>);
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(navigator.<span class="hljs-property">userAgent</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};</pre></div></div>
          
      </li>
      
      
      <li id="section-4">
          <div class="annotation">
            
            <div class="pilwrap for-h3">
              <a class="pilcrow" href="#section-4">&#182;</a>
            </div>
            <h3>Are Service Workers in control?</h3>
Check whether a service worker is controlling the application

          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-title class_">SWUtil</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isServiceWorkerControllingThisApp</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">newSection</span>();
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Are Service Workers in control?&#x27;</span>);

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;checking navigator.serviceWorker.controller&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-5">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-5">&#182;</a>
            </div>
            <p>Checking <code>navigator.serviceWorker.controller</code></p>

          </div>
          
          <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>) {</pre></div></div>
          
      </li>
      
      
      <li id="section-6">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-6">&#182;</a>
            </div>
            <p>A service worker controls this app</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;A service worker controls this app&#x27;</span>);
    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;The following service worker controls this app: &#x27;</span>);
    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>.<span class="hljs-property">scriptURL</span> +
                <span class="hljs-string">&#x27; &lt;= navigator.serviceWorker.controller.scriptURL&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-7">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-7">&#182;</a>
            </div>
            <p>Please find the <code>oninstall</code>, <code>onactivate</code>, and <code>onfetch</code> events in the <a href="sw.html" title="the js module implementing a service worker">service-worker.js module</a>.</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Please enable and check the browser logs for the oninstall&#x27;</span> +
                <span class="hljs-string">&#x27;, onactivate, and onfetch events&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-8">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-8">&#182;</a>
            </div>
            <p>More on:</p>
<ul>
<li>Firefox: <em>about:serviceworkers</em></li>
<li>Chrome: <em>chrome://serviceworker-internals/</em></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API#Browser_compatibility">Browser compatibility</a></li>
</ul>

          </div>
          
          <div class="content"><div class='highlight'><pre>    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;More on about:serviceworkers (Firefox) &#x27;</span> +
                 <span class="hljs-string">&#x27;or chrome://serviceworker-internals/&#x27;</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;No, there is no service worker controlling this app&#x27;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};</pre></div></div>
          
      </li>
      
      
      <li id="section-9">
          <div class="annotation">
            
            <div class="pilwrap for-h3">
              <a class="pilcrow" href="#section-9">&#182;</a>
            </div>
            <h3>Register a Service Worker</h3>
Register a service worker

          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-title class_">SWUtil</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">registerServiceWorker</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">scriptURL, scope</span>) {
  <span class="hljs-keyword">var</span> swRegisterSecondParam = {};

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">newSection</span>();
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Registering service worker...&#x27;</span>);
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Registering service worker with serviceWorker.register()&#x27;</span>);

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;navigator.serviceWorker.register(scriptURL, scope)&#x27;</span>);
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;scriptURL: &#x27;</span> + scriptURL);</pre></div></div>
          
      </li>
      
      
      <li id="section-10">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-10">&#182;</a>
            </div>
            <p>add optional parameter ‘scope’ if specified</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (scope) {
    swRegisterSecondParam.<span class="hljs-property">scope</span> = scope;
    <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;options.scope: &#x27;</span> + swRegisterSecondParam.<span class="hljs-property">scope</span>);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">then</span>(<span class="hljs-params">resolve, reject</span>) {</pre></div></div>
          
      </li>
      
      
      <li id="section-11">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-11">&#182;</a>
            </div>
            <p>Calling <code>navigator.serviceWorker.register()</code></p>

          </div>
          
          <div class="content"><div class='highlight'><pre>      navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(
        scriptURL,
        swRegisterSecondParam
      ).<span class="hljs-title function_">then</span>(</pre></div></div>
          
      </li>
      
      
      <li id="section-12">
          <div class="annotation">
            
            <div class="pilwrap for-h4">
              <a class="pilcrow" href="#section-12">&#182;</a>
            </div>
            <h4>registration Success</h4>

          </div>
          
          <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">registrationSuccess</span>(<span class="hljs-params">swRegistration</span>) {
          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;registrationSuccess(swRegistration)&#x27;</span>);
          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(swRegistration);</pre></div></div>
          
      </li>
      
      
      <li id="section-13">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-13">&#182;</a>
            </div>
            <p>Checking the <code>active</code> attribute on a <code>ServiceWorkerRegistration</code> object</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (swRegistration.<span class="hljs-property">active</span>) {</pre></div></div>
          
      </li>
      
      
      <li id="section-14">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-14">&#182;</a>
            </div>
            <p>Registering the active service worker again</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;Registering the active service worker again: &#x27;</span>);
            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(swRegistration.<span class="hljs-property">active</span>.<span class="hljs-property">scriptURL</span> +
                         <span class="hljs-string">&#x27; &lt;= swRegistration.active.scriptURL&#x27;</span>);
          }</pre></div></div>
          
      </li>
      
      
      <li id="section-15">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-15">&#182;</a>
            </div>
            <p>Checking the <code>installing</code> attribute on a <code>ServiceWorkerRegistration</code> object</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (swRegistration.<span class="hljs-property">installing</span>) {</pre></div></div>
          
      </li>
      
      
      <li id="section-16">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-16">&#182;</a>
            </div>
            <p>Registering the following service worker for the first time</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;Registering the following service worker for &#x27;</span> +
                         <span class="hljs-string">&#x27;the first time: &#x27;</span>);
            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(swRegistration.<span class="hljs-property">installing</span>.<span class="hljs-property">scriptURL</span> +
                         <span class="hljs-string">&#x27; &lt;= swRegistration.installing.scriptURL&#x27;</span>);
          }

          <span class="hljs-keyword">if</span> (swRegistration.<span class="hljs-property">scope</span>) {
            <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;with scope: &#x27;</span> + swRegistration.<span class="hljs-property">scope</span> +
                         <span class="hljs-string">&#x27; &lt;= swRegistration.scope&#x27;</span>);
          }</pre></div></div>
          
      </li>
      
      
      <li id="section-17">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-17">&#182;</a>
            </div>
            <p>Service worker registered</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Service worker successfully registered&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-18">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-18">&#182;</a>
            </div>
            <p>Please find the <code>oninstall</code>, <code>onactivate</code>, and <code>onfetch</code> events in the <a href="sw.html" title="the js module implementing a service worker">service-worker.js module</a>.</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Please enable and check the browser logs for&#x27;</span> +
                      <span class="hljs-string">&#x27; the oninstall, onactivate, and onfetch events&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-19">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-19">&#182;</a>
            </div>
            <p>SW is in control, once document is reloaded</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;SW is in control, once document is reloaded&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-20">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-20">&#182;</a>
            </div>
            <p>More on:</p>
<ul>
<li>Firefox: <em>about:serviceworkers</em></li>
<li>Chrome: <em>chrome://serviceworker-internals/</em></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API#Browser_compatibility">Browser compatibility</a></li>
</ul>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;More on about:serviceworkers (Firefox) &#x27;</span> +
                       <span class="hljs-string">&#x27;or chrome://serviceworker-internals/&#x27;</span>);

          <span class="hljs-title function_">resolve</span>();
        },</pre></div></div>
          
      </li>
      
      
      <li id="section-21">
          <div class="annotation">
            
            <div class="pilwrap for-h4">
              <a class="pilcrow" href="#section-21">&#182;</a>
            </div>
            <h4>registration Error</h4>

          </div>
          
          <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">registrationError</span>(<span class="hljs-params">why</span>) {
          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;registrationError(why)&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-22">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-22">&#182;</a>
            </div>
            <p>Service worker NOT registered</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;Service worker NOT registered&#x27;</span>);
          <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(why);

          <span class="hljs-title function_">reject</span>();
        }
      );
    }
  );
};</pre></div></div>
          
      </li>
      
      
      <li id="section-23">
          <div class="annotation">
            
            <div class="pilwrap for-h3">
              <a class="pilcrow" href="#section-23">&#182;</a>
            </div>
            <h3>Unregister a Service Worker</h3>
Unregister the active service worker

          </div>
          
          <div class="content"><div class='highlight'><pre><span class="hljs-title class_">SWUtil</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">unregisterServiceWorker</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">newSection</span>();

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Unregistering the active service worker...&#x27;</span>);
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;if something goes wrong, please unregister &#x27;</span> +
               <span class="hljs-string">&#x27;the service worker &#x27;</span>);
  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;about:serviceworkers (Firefox) &#x27;</span> +
               <span class="hljs-string">&#x27;or chrome://serviceworker-internals/&#x27;</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">then</span>(<span class="hljs-params">resolve, reject</span>) {
      <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;navigator.serviceWorker.getRegistration()&#x27;</span> +
                   <span class="hljs-string">&#x27;.then(success, error)&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-24">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-24">&#182;</a>
            </div>
            <p>Calling <code>navigator.serviceWorker.getRegistration()</code></p>

          </div>
          
          <div class="content"><div class='highlight'><pre>      navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">getRegistration</span>()
      .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">getRegistrationSuccess</span>(<span class="hljs-params">swRegistration</span>) {
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;getRegistrationSuccess(swRegistration)&#x27;</span>);
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(swRegistration);
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;Unregistering the following service worker: &#x27;</span> +
          swRegistration.<span class="hljs-property">active</span>.<span class="hljs-property">scriptURL</span> +
          <span class="hljs-string">&#x27; &lt;= swRegistration.active.scriptURL&#x27;</span>);
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;with scope &#x27;</span> + swRegistration.<span class="hljs-property">scope</span> +
                     <span class="hljs-string">&#x27; &lt;= swRegistration.scope&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-25">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-25">&#182;</a>
            </div>
            <p>Calling <code>unregister()</code> on a <code>ServiceWorkerRegistration</code> object</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;swRegistration.unregister().then()&#x27;</span>);
        swRegistration.<span class="hljs-title function_">unregister</span>()
          .<span class="hljs-title function_">then</span>(</pre></div></div>
          
      </li>
      
      
      <li id="section-26">
          <div class="annotation">
            
            <div class="pilwrap for-h4">
              <a class="pilcrow" href="#section-26">&#182;</a>
            </div>
            <h4>unregister Success</h4>

          </div>
          
          <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">function</span> <span class="hljs-title function_">unregisterSuccess</span>(<span class="hljs-params"></span>) {
              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;unregisterSuccess()&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-27">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-27">&#182;</a>
            </div>
            <p>The service worker has been successfully unregistered</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;The service worker has been &#x27;</span> +
                          <span class="hljs-string">&#x27;successfully unregistered&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-28">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-28">&#182;</a>
            </div>
            <p>More on:</p>
<ul>
<li>Firefox: <em>about:serviceworkers</em></li>
<li>Chrome: <em>chrome://serviceworker-internals/</em></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API#Browser_compatibility">Browser compatibility</a></li>
</ul>

          </div>
          
          <div class="content"><div class='highlight'><pre>              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;More on about:serviceworkers (Firefox) &#x27;</span> +
                           <span class="hljs-string">&#x27;or chrome://serviceworker-internals/&#x27;</span>);

              <span class="hljs-title function_">resolve</span>();
            },</pre></div></div>
          
      </li>
      
      
      <li id="section-29">
          <div class="annotation">
            
            <div class="pilwrap for-h4">
              <a class="pilcrow" href="#section-29">&#182;</a>
            </div>
            <h4>unregister Error</h4>

          </div>
          
          <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">function</span> <span class="hljs-title function_">unregisterError</span>(<span class="hljs-params">why</span>) {
              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;unregisterError(why)&#x27;</span>);</pre></div></div>
          
      </li>
      
      
      <li id="section-30">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-30">&#182;</a>
            </div>
            <p>The service worker has NOT been unregistered</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;The service worker has NOT been unregistered&#x27;</span>);
              <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(why);

              <span class="hljs-title function_">reject</span>();
            }
          );
      },</pre></div></div>
          
      </li>
      
      
      <li id="section-31">
          <div class="annotation">
            
            <div class="pilwrap for-h4">
              <a class="pilcrow" href="#section-31">&#182;</a>
            </div>
            <h4>Error getting a Service Worker Registration</h4>

          </div>
          
          <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRegistrationError</span>(<span class="hljs-params">why</span>) {
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;getRegistrationError(why)&#x27;</span>);
        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">error</span>(why);</pre></div></div>
          
      </li>
      
      
      <li id="section-32">
          <div class="annotation">
            
            <div class="pilwrap ">
              <a class="pilcrow" href="#section-32">&#182;</a>
            </div>
            <p>It has been not possibile to unregister the service worker</p>

          </div>
          
          <div class="content"><div class='highlight'><pre>        <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;It has been not possibile to unregister&#x27;</span> +
                    <span class="hljs-string">&#x27; the service worker&#x27;</span>);
      }
    );
    }
  );
};</pre></div></div>
          
      </li>
      
  </ul>
</div>

        <hr/>
        <h2>Has it been useful?</h2>
       <p>Tell us what you think of this recipe by leaving a comment!</p>
        <aside id="disqus_thread"></aside>
        <script>
         // https://disqus.com/admin/universalcode/#configuration-variables
         var disqus_config = function () {
          this.page.identifier = 'live-flowchart';
         };
         (function() { // DON'T EDIT BELOW THIS LINE
           var d = document, s = d.createElement('script');
           s.src = '//serviceworkers.disqus.com/embed.js';
           s.setAttribute('data-timestamp', +new Date());
           (d.head || d.body).appendChild(s);
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </main>
  </div>
</body>
</html>
